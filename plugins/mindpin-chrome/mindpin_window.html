<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Mindpin 工具栏</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="javascripts/jquery.min.js" ></script>
    <script type="text/javascript" src="javascripts/jquery.tools.min.js" ></script>
    <script type="text/javascript" src="javascripts/mindpin_window.js" ></script>
    <!-- tab styling --> 
    <link rel="stylesheet" type="text/css" href="skin/tabs.css" />

  </head>
  <body>
    <div id="action">
      <button onclick="MindpinWindow.open_send_text_window('发送测试数据')">发送页面测试</button>
      <button onclick="MindpinWindow.open_share_text_window('分享测试数据')">分享页面测试</button>
      <div id="logined_action" style="display:none;">
        <div id="user_name"></div>
        <div id="user_avatar"><img id="user_avatar_img" src="" width="32px" height="32px" /></div>
        <button id="logout">退出登录</button>
      </div>
      <div id="unlogin_action" style="display:none;">
        <button id="login">登录</button>
        <button id="register">注册</button>
      </div>
    </div>
    <div id="mindpin_window_content" style="display:none">
      <!-- the tabs -->
      <ul class="tabs"> 
        <li><a href="#">网站资料</a></li>
        <li><a href="#">浏览历史</a></li>
        <li><a href="#">网页信息</a></li>
      </ul>

      <!-- tab "panes" -->
      <div class="panes">
        <div class="pane_content" id="web_site_info" >
          <iframe id="web_site_info_iframe" width="100%" height="50%" ></iframe>
          <iframe id="web_site_comments_iframe" width="100%" height="50%" ></iframe>
        </div>
        <div class="pane_content" id="browse_history">
          <iframe id="browse_history_iframe" width="100%" height="100%" ></iframe>
        </div>
        <div class="pane_content" id="page_information" style="overflow:scroll;">
          <div>
            <div id="rsses_content"></div>
            <hr>
            <div id="links_content"></div>
            <hr>
            <div id="images_content"></div>
          </div>
          <button onclick="pack_send_elements();">打包发送</button>
        </div>
      </div>
    </div>
  </body>
  <script type="text/javascript">
    // 页面加载完毕后 页签的处理
    $("ul.tabs").tabs("div.panes > div.pane_content");

    // 选中元素的处理
    function pack_send_elements(){
      var rsses = []
      $(".rss_item input.package_checkbox:checked").each(function(i,item){
        var link = $(item).siblings('a.data')[0];
        rsses[i] = {href:link.href,text:link.text}
      });
      var links = []
      $(".link_item input.package_checkbox:checked").each(function(i,item){
        var link = $(item).siblings('a.data')[0];
        links[i] = {href:link.href,text:link.text}
      });
      var images = []
      $(".image_item input.package_checkbox:checked").each(function(i,item){
        var image = $(item).siblings('img.data')[0];
        images[i] = {src:image.src,width:image.width,height:image.height}
      });
      var final_data = {rsses:rsses,links:links,images:images}
    }
  </script>
</html>
