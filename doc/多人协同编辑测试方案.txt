1 自己的压力测试
def change(i)
    hash ={:op=>{"op"=>"do_insert", "params"=>{"new_node_id"=>"XLev25I7", "index"=>0, "parent_id"=>"h2KqtRIP"}},
          :user => "fushang318@gmail.com",
          :map  => 25796,
          :rev  => {:local=>154,:remote=>154}
        }
    mq = MindmapInputQueue.new
    mq.push(hash.to_json)
end

def run(count)
count.times do |i|
  Thread.new do 
    change(i)
  end
end
end

run(50)

2 多人协同的冲突编辑测试

第一类 对一个节点进行多人操作
1 两个人几乎同时提交对一个节点标题的编辑操作

2 两个人 一个先删除这个节点，
  另一个人在还没有同步到操作的时候
  提交对这个节点标题的编辑操作
  
3 两个人几乎同时提交对一个节点插入图片的操作

4 两个人同时移动一个节点的位置

5 两个人 一个先删除这个节点，
  另一个人在还没有同步到操作的时候
  给这个节点创建子节点


第二类 对一个子节点和父节点同时进行操作
1 两个人 一个先删除父节点
  另一个人在还没有同步到操作的时候
  提交对子节点的编辑操作
  
第三类 对两个节点进行操作，把一个节点移到另一个节点下
1 两个人 一个先删除 节点A
  另一个人在还没有同步到操作的时候
  把 节点B 移到节点A下
2 两个人 一个人先把 节点B 移到节点A下
  另一个人在还没有同步到操作的时候
  把 节点A 删除
  
第四类 把两个节点移动到第三个节点下
1 两个人 A 操作节点1, B操作节点2,
  两个人几乎同时把节点移动到节点3下
  节点1 和节点2 在节点3下的顺序是否能
  同步正确
2 两个人 A 把节点1 移到 节点2 的最后
  B 在节点2下新建节点
  两个操作几乎同时发生
  新增节点和节点1 是否能同步正确
3 两个人 A 把节点1 移到 节点2 的第二位
  B 删除节点2 的第一个节点 节点3
  两个操作几乎同时发生
  节点1 的位置是否同步正确


      